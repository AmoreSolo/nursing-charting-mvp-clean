<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Clinical Note Assistant</title>
  <style>
    :root{
      --bg:#f7f8fb;
      --card:#ffffff;
      --ink:#0f172a;          /* slate-900 */
      --muted:#475569;        /* slate-600 */
      --accent:#1d4ed8;       /* blue-700 */
      --accent-press:#1e40af; /* blue-800 */
      --ring:#93c5fd;         /* blue-300 */
      --border:#e5e7eb;       /* gray-200 */
      --warn:#7c2d12;         /* amber-900-ish for disclaimer text */
      --warn-bg:#fff7ed;      /* amber-50-ish */
      --radius:14px;
    }
    *{box-sizing:border-box}
    body{
      margin:0;background:var(--bg);color:var(--ink);
      font:16px/1.55 system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial,sans-serif;
    }
    .wrap{max-width:940px;margin:42px auto 60px;padding:0 18px}
    .title{font-size:36px;font-weight:800;letter-spacing:.2px;text-align:center;margin:6px 0 6px}
    .tagline{color:var(--muted);text-align:center;margin:0 0 26px;font-size:15px}
    .card{background:var(--card);border:1px solid var(--border);border-radius:var(--radius);padding:18px 18px}
    label{display:block;font-weight:600;margin:10px 6px 8px;color:var(--muted)}
    textarea{
      width:100%;min-height:170px;border:1px solid var(--border);border-radius:12px;
      padding:14px 16px;resize:vertical;background:#fff;color:var(--ink);
      outline:none;box-shadow:none;transition:box-shadow .15s,border-color .15s;
      font-family:ui-monospace,SFMono-Regular,Menlo,Consolas,monospace
    }
    textarea:focus{border-color:var(--ring);box-shadow:0 0 0 4px rgba(147,197,253,.45)}
    .center{display:flex;justify-content:center;margin:20px 0}
    .btn{
      appearance:none;border:0;border-radius:999px;padding:12px 28px;
      font-weight:700;letter-spacing:.2px;color:#fff;background:var(--accent);
      box-shadow:0 6px 22px rgba(29,78,216,.25);cursor:pointer;transition:.15s;
    }
    .btn:disabled{opacity:.6;cursor:not-allowed;box-shadow:none}
    .btn:hover{transform:translateY(-1px)}
    .btn:active{background:var(--accent-press);transform:none}

    .mono{white-space:pre-wrap;font-family:ui-monospace,SFMono-Regular,Menlo,Consolas,monospace}
    .stack{display:grid;gap:14px}
    .disclaimer{
      margin-top:10px;border:1px solid #fed7aa;background:var(--warn-bg);
      color:var(--warn);border-radius:12px;padding:12px 14px;font-size:14px;
    }
    .muted{color:var(--muted)}
  </style>
</head>
<body>
  <div class="wrap">
    <h1 class="title">Clinical Note Assistant</h1>
    <p class="tagline">Clean, objective charting—faster. Built to encourage AHS-aligned documentation.</p>

    <div class="card stack">
      <label for="input">Input</label>
      <textarea id="input" placeholder="e.g., refused shower this morning; c/o feeling unwell; staff offered alternative…"></textarea>

      <div class="center">
        <button id="go" class="btn">Generate</button>
      </div>

      <label for="feedback">Educator Feedback</label>
      <textarea id="feedback" class="mono" readonly placeholder="—"></textarea>

      <label for="example">Suggested Example (based on feedback)</label>
      <textarea id="example" class="mono" readonly placeholder="—"></textarea>

      <div class="center">
        <button id="copyExample" class="btn">Copy</button>
      </div>

      <div class="disclaimer">
        Note: The suggested example is a guide to illustrate expected detail and structure. It must not replace
        objective documentation of what <strong>you actually observed and completed</strong>. Always chart facts, follow AHS policy,
        and document per site procedure.
      </div>
    </div>

    <p class="muted" style="text-align:center;margin-top:18px;"></p>
  </div>

  <script>
    const $ = id => document.getElementById(id);
    const goBtn = $("go");
    const input = $("input");
    const feedback = $("feedback");
    const example = $("example");
    const copyBtn = $("copyExample");

    async function generate() {
      const text = input.value.trim();
      if (!text) return;
      goBtn.disabled = true; goBtn.textContent = "Working…";
      feedback.value = "—";
      example.value = "—";
      try {
        const r = await fetch("/api/chat", {
          method: "POST",
          headers: {"Content-Type": "application/json"},
          body: JSON.stringify({ input: text })
        });
        const data = await r.json();
        if (!r.ok) throw new Error(data?.error || "Server error");

        feedback.value = data.feedback || "—";
        example.value = data.example || "—";
      } catch (e) {
        feedback.value = `Network error: ${e.message}`;
      } finally {
        goBtn.disabled = false; goBtn.textContent = "Generate";
      }
    }

    function copyExample() {
      const txt = example.value.trim();
      if (!txt) return;
      navigator.clipboard.writeText(txt).then(()=>{
        copyBtn.textContent = "Copied!";
        setTimeout(()=> copyBtn.textContent = "Copy", 1200);
      });
    }

    goBtn.addEventListener("click", generate);
    copyBtn.addEventListener("click", copyExample);
  </script>
</body>
</html>
